<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Research</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

  <style>
    :root{
      --bg:#f3f4ea;
      --fg:#1d1f21;
      --muted:#565b5f;
      --primary:#0a66c2;
      --card:#ffffff;
      --ring:#89b4fa;
      --maxw:1000px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0e1116;
        --fg:#e6e6e6;
        --muted:#a0a4aa;
        --card:#11151c;
        --primary:#7ab0ff;
        --ring:#3b82f6;
      }
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family: Arial, Helvetica, sans-serif;
      color:var(--fg);
      background:var(--bg);
      line-height:1.6;
    }
    .wrapper{max-width:var(--maxw); margin:0 auto; padding:0 16px;}

    /* 跳至主內容（可近用） */
    .skip-link{
      position: absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
    }
    .skip-link:focus{
      position: fixed; left:16px; top:16px; width:auto; height:auto; background:#000; color:#fff;
      padding:8px 12px; border-radius:6px; z-index:1000;
    }

    /* ===== Header（精簡 + 手機收合） ===== */
    header{
      position: sticky; top: 0; z-index: 50;
      background: var(--bgcc, rgba(255,255,255,0.6));
      backdrop-filter: saturate(180%) blur(12px);
      border-bottom: 1px solid rgba(0,0,0,0.08);
    }
    header .wrapper{
      display: flex; align-items: center; gap: 16px;
      justify-content: space-between;
      padding: 6px 16px;
    }
    .brand{ display: inline-flex; align-items: center; gap: 10px; }
    .brand img{ width: 80px; height: auto; }
    .brand-title{ margin: 0; font-size: 1.25rem; line-height: 1.1; }
    .brand-sub{ margin: 0; font-size: .8rem; color: var(--muted); }

    .home-link{
      margin-left: 8px;
      padding: 6px 10px; border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.15);
      display: inline-flex; align-items: center; gap: 8px; text-decoration: none; color: inherit;
    }

    /* 導覽列：手機預設收合 */
    .icon-nav{
      display: none;           /* mobile default: hidden */
      flex-direction: column;  /* mobile vertical */
      gap: 28px;
      padding: 10px 0 16px;
      margin: 0;
      flex: 1 1 auto;
    }
    .icon-nav.open{ display: flex; }

    .nav-item{
      text-decoration:none; color:inherit; text-align:center; padding:10px 12px; border-radius:10px;
      transition: transform .2s, box-shadow .2s, background-color .2s, color .2s;
      outline-offset:2px;
    }
    .nav-item:focus{outline:3px solid var(--ring)}
    .nav-item:hover{ transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,.12); color: var(--primary); }
    .nav-item.active{ background: #000; color: #fff; }
    .nav-icon{ width: 50px; height: auto; display: block; margin: 0 auto 2px; }

    .nav-toggle{
      margin-left: auto;
      font-size: 1.4rem; line-height: 1;
      background: none; border: 0; color: inherit; cursor: pointer;
      padding: 6px 8px; border-radius: 6px;
    }
    .nav-toggle:focus{ outline: 3px solid var(--ring); outline-offset: 2px; }

    /* 桌面版：nav 永遠展開，漢堡隱藏 */
    @media (min-width: 768px){
      .nav-toggle{ display: none; }
      .icon-nav{
        display: flex !important;
        flex-direction: row; align-items: center; justify-content: center;
        gap: 16px; padding: 0;
      }
    }

    /* 主內容 */
    main{padding:24px 0}
    .page-title{text-align:center; font-size:2rem; margin:24px 0 12px; font-weight:bold}
    .intro-text{max-width:760px; margin:0 auto 28px; text-align:center; color:var(--muted)}

    /* 書籍卡片／研究卡片等原樣式 */
    .book-grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:24px; max-width:900px; margin:0 auto;}
    .book-card{background:var(--card); border:1px solid rgba(0,0,0,0.12); border-radius:12px; padding:12px; text-align:center; position:relative; overflow:hidden; transition: transform .2s, box-shadow .2s, border-color .2s;}
    .book-card:hover{transform:translateY(-5px); box-shadow:0 12px 24px rgba(0,0,0,.18); border-color:rgba(0,0,0,0.18)}
    .book-link{display:block; text-decoration:none; color:inherit; outline-offset:3px}
    .book-link:focus{outline:3px solid var(--ring)}
    .book-cover{width:250px; max-width:100%; height:auto; display:block; margin:6px auto 12px; border-radius:8px}
    .solution-title{font-size:1rem; line-height:1.4; margin:0 8px 8px}

    .ribbon{position:absolute; top:12px; right:-40px; transform:rotate(45deg); background:#111; color:#fff; padding:6px 50px; font-size:.8rem; letter-spacing:.5px; box-shadow:0 6px 12px rgba(0,0,0,.25);}

    /* 輪播 */
    .carousel{ --h: 400px; --dotSize: 10px; position: relative; max-width: 400px; margin: 24px auto; }
    .carousel-track{ position: relative; height: var(--h); overflow: hidden; border-radius: 10px; background: #000; }
    .slide{ position: absolute; inset: 0; display: grid; place-items: center; opacity: 0; transition: opacity .4s ease; }
    .slide.is-active{ opacity: 1; }
    .slide img{ height: 100%; width: auto; max-width: 100%; object-fit: contain; display: block; }
    .caption{ position: absolute; left: 0; right: 0; bottom: 0; padding: 8px 12px; background: linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0)); color: #fff; font-size: .95rem; }

    .ctrl{ position: absolute; top: 50%; transform: translateY(-50%); padding: 6px 10px; border-radius: 8px; background: rgba(0,0,0,.45); color:#fff; text-decoration: none; font-size: 22px; line-height: 1; user-select: none; transition: background .2s; }
    .ctrl:hover, .ctrl:focus{ background: rgba(0,0,0,.7); outline: 3px solid #66a3ff; outline-offset: 2px; }
    .prev{ left: 8px; }
    .next{ right: 8px; }

    .dots{ display: flex; gap: 8px; justify-content: center; align-items: center; margin-top: 10px; flex-wrap: wrap; }
    .dot{ width: var(--dotSize); height: var(--dotSize); border-radius: 50%; background: #cfd3d8; border: 0; cursor: pointer; }
    .dot:focus{ outline: 3px solid #66a3ff; outline-offset: 2px; }
    .dot.is-active{ background: #333; }

    .grid-2{ display:grid; grid-template-columns: 1.1fr 0.9fr; gap: 28px; align-items: start; }
    .lead{ font-size: 1.05rem; color: #444; }
    .key-bullets{ margin: 14px 0 0; padding-left: 18px; }
    .key-bullets li{ margin-bottom: 6px; }

    .carousel.compact{ --h: 400px; }
    .carousel.compact .caption{ font-size: 1rem; }

    .card-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; color: #111; }
    .research-card{ background: #fff; border: 1px solid rgba(0,0,0,.1); border-radius: 12px; padding: 16px 16px 14px; transition: transform .2s, box-shadow .2s, border-color .2s; }
    .research-card:hover{ transform: translateY(-4px); border-color: rgba(0,0,0,.18); box-shadow: 0 10px 20px rgba(0,0,0,.12); }
    .kicker{ font-size: .8rem; }

    /* 手機高度微調 */
    @media (max-width: 640px){
      .carousel{ --h: 220px; }
      .caption{ font-size: .85rem; }
    }

    /* 頁尾 */
    footer{padding:28px 0 36px; border-top:1px solid rgba(0,0,0,0.1); margin-top:36px}
    .logos{display:flex; justify-content:center; align-items:center; gap:28px}
    .logos img{height:80px; width:auto}

    /* === 讓兩欄在手機堆疊，並可選擇顯示順序 === */
@media (max-width: 900px){
  .grid-2{
    grid-template-columns: 1fr;       /* 改成單欄 */
    gap: 18px;
  }
  /* 如果想讓「輪播在上、文字在下」： */
  .grid-2 > :first-child{ order: 2; } /* 文字區塊 */
  .grid-2 > :last-child{  order: 1; } /* 輪播區塊 */
  /* 若想維持「文字在上、輪播在下」就把上面兩行 order 拿掉 */
}

/* === 輪播：用 aspect-ratio 自適應高度 === */
.carousel{
  max-width: 100%;
  width: min(100%, 640px);                           /* 手機滿版、桌機不會太寬 */
  aspect-ratio: 16 / 9;                              /* 基準比例：可依需求改 4/3、1/1 */
  height: auto;                                      /* 高度由寬度與比例決定 */
  --dotSize: 10px;
  margin: 16px auto;
}
.carousel-track{
  position: relative;
  height: 100%;                                      /* 跟著容器高度 */
  border-radius: 10px;
  overflow: hidden;
  background: #000;
}
/* 圖片縮放：contain 進去、不變形 */
.slide img{
  width: 100%;
  height: 100%;
  object-fit: contain;                               
  display: block;
}

/* 讓高度在不同螢幕更靈活（16:9 的同時再加一層保險） */
@supports (height: clamp(1px, 1vw, 2px)){
  .carousel{
    /* 對極小手機別太扁，對大一點的手機也別太高 */
    height: clamp(180px, 56vw, 420px);
    aspect-ratio: auto; /* 用 clamp 控高時就關掉 aspect-ratio */
  }
}

/* 文字大小、操作按鈕在手機好點擊 */
@media (max-width: 640px){
  .caption{ font-size: .9rem; padding: 8px 10px; }
  .ctrl{ font-size: 20px; padding: 6px 9px; }
  .dots{ gap: 10px; }
  .dot{ width: 12px; height: 12px; }
}

/* 導覽 icon 在很小的手機別太大 */
@media (max-width: 420px){
  .nav-icon{ width: 36px; }
}

/* 避免 GIF 在 iOS/Safari 因縮放出現鋸齒（可選） */
.slide img{
  image-rendering: -webkit-optimize-contrast;
}

/* 手機版：改成單欄，文字在上、輪播在下 */
@media (max-width: 900px){
  .grid-2{
    grid-template-columns: 1fr;   /* 單欄 */
    gap: 18px;
  }
  .grid-2 > :first-child{ order: 1; }  /* 文字區塊 */
  .grid-2 > :last-child{  order: 2; }  /* 輪播區塊 */
}

/* Publications filter buttons */
.pub-filter {
  background: #fff;          /* 白底 */
  color: #000;               /* 黑字 */
  border: 1px solid #000;    /* 黑框 */
  padding: 6px 12px;
  border-radius: 999px;
  cursor: pointer;
  transition: background .2s, color .2s, transform .2s;
}

.pub-filter:hover {
  background: #000;          /* 滑過時反轉 */
  color: #fff;
}

.pub-filter.is-active {
  background: #000;          /* 選中時反轉 */
  color: #fff;
}

/* Dark mode 特別處理：維持白底黑字 */
@media (prefers-color-scheme: dark) {
  .pub-filter {
    background: #fff !important;
    color: #000 !important;
    border: 1px solid #fff;  /* 白邊框（在深色背景下比較柔和） */
  }

  .pub-filter:hover,
  .pub-filter.is-active {
    background: #9e9e9e !important;  /* hover/active 時灰底 */
    color: #000 !important;
  }
}

  </style>
</head>

<body>
  <a href="#main" class="skip-link">Skip to main content</a>

  <!-- 頁首 -->
  <header>
    <div class="wrapper">
      <div class="brand">
        <div>
           <img src="yen.png" alt="HYY Logo">
          <h1 class="brand-title">Hao-Yang Yen</h1>
        </div>
      </div>

      <!-- 導覽列：與品牌同一行（桌面），手機可收合 -->
      <nav id="primary-nav" class="icon-nav" aria-label="Primary">
        <a href="experience.html" class="nav-item">
          <img src="exp.png" alt="" class="nav-icon"><span>Experience</span>
        </a>
        <a href="learning.html" class="nav-item">
          <img src="l.png" alt="" class="nav-icon"><span>Learning</span>
        </a>
        <a href="research.html" class="nav-item active">
          <img src="flipped_r.png" alt="" class="nav-icon"><span>Research</span>
        </a>
        <a href="Explore.html" class="nav-item">
          <img src="e.png" alt="" class="nav-icon"><span>Explore</span>
        </a>
      </nav>

      <!-- 右側：手機版漢堡 + Home 按鈕 -->
      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="primary-nav">☰</button>

      <a class="home-link" href="index.html" aria-label="Go to HYY Home">Home</a>
    </div>
  </header>

  <!-- 主內容 -->
  <main id="main" class="wrapper">
    <section class="section research-intro">
      <div class="grid-2">
        <div>
          <h2 class="page-title">Research Interests</h2>
          <p class="lead">
            My research spans statistical physics, celestial mechanics, and dynamical systems. I study the
            statistical properties of complex and stochastic dynamical systems (e.g., epidemic and ecological models),
            and N-body problems in celestial mechanics—stability of planetary systems, symmetry breaking,
            and phase-transition-like phenomena. I’m also interested in connections between statistical physics
            and computer/data science.
          </p>
          <ul class="key-bullets">
            <li><strong>Stochastic dynamics:</strong> spectra, mixing, universality, rare events</li>
            <li><strong>Celestial mechanics:</strong> N-body stability, central configurations, symmetry</li>
            <li><strong>Bridges:</strong> statistical physics × algorithms / data science</li>
          </ul>
        </div>

        <div>
          <section class="carousel compact" data-carousel="research" aria-roledescription="carousel" aria-label="Research visuals">
            <div class="carousel-track" role="group">
              <figure class="slide is-active">
                <img src="five_gon.gif" alt="Central configuration on a circumscribed circle" loading="lazy">
                <figcaption class="caption">A central configuration whose center of mass lies at the circumcenter.</figcaption>
              </figure>
              <figure class="slide">
                <img src="Lorentz_attractor.gif" alt="Lorenz attractor" loading="lazy">
                <figcaption class="caption">Lorenz attractor — a classic minimal chaotic climate model.</figcaption>
              </figure>
              <figure class="slide">
                <img src="cat.gif" alt="Arnold's cat map" loading="lazy">
                <figcaption class="caption">Arnold’s cat map: ergodicity, mixing, chaos—at a glance.</figcaption>
              </figure>
              <figure class="slide">
                <img src="PATTERN.gif" alt="Reaction–diffusion pattern formation" loading="lazy">
                <figcaption class="caption">Self-organized pattern formation in driven–dissipative media.</figcaption>
              </figure>
              <figure class="slide">
                <img src="tube_anim.gif" alt="Turbulence eclogical model" loading="lazy">
                <figcaption class="caption">Ecological A-B-E model for turbulence.</figcaption>
              </figure>

              <a class="ctrl prev" href="#" aria-label="Previous slide" data-action="prev">&#10094;</a>
              <a class="ctrl next" href="#" aria-label="Next slide" data-action="next">&#10095;</a>
            </div>

            <div class="dots" role="tablist" aria-label="Slide dots">
              <button class="dot is-active" role="tab" aria-selected="true" data-index="0"></button>
              <button class="dot" role="tab" aria-selected="false" data-index="1"></button>
              <button class="dot" role="tab" aria-selected="false" data-index="2"></button>
              <button class="dot" role="tab" aria-selected="false" data-index="3"></button>
              <button class="dot" role="tab" aria-selected="false" data-index="4"></button>
            </div>
          </section>
        </div>
      </div>
    </section>

    <section class="section">
   <!-- === Publications === -->
<section id="publications" class="section">
  <h2 class="page-title">Publications</h2>
  <p class="intro-text">Selected papers and preprints. Full list upon request.</p>

  <!-- filters -->
  <div class="pub-filters" role="tablist" aria-label="Publication filters">
    <button class="pub-filter is-active" data-filter="all" role="tab" aria-selected="true">All</button>
    <button class="pub-filter" data-filter="published" role="tab" aria-selected="false">Published</button>
    <button class="pub-filter" data-filter="preprint" role="tab" aria-selected="false">Preprint &amp; In-press</button>
    <button class="pub-filter" data-filter="preparation" role="tab" aria-selected="false">In review / In preparation</button>
  </div>

  <!-- list -->
  <!-- <div class="pub-year-group">
    <h3 class="pub-year">2025</h3>
    <ol class="pub-list">
     

      
    </ol>
  </div>-->

  <div class="pub-year-group">
    <ol class="pub-list">
   
     <li class="pub-item" data-type="preparation">
        <div class="pub-main">
          <span class="pub-authors"><strong>H.-Y. Yen</strong>, et al.</span>
          <span class="pub-title">Breakdown of Directed Percolation Universality under Boundary Effects in Non-Reciprocal Absorbing-State Transitions</span>
          <span class="pub-venue">Manuscript under preparation, 2025</span>
        </div>
        <!--<div class="pub-actions">
          <a class="pub-link" href="DP.pdf" target="_blank">PDF</a>
        </div>-->
      </li>
       <li class="pub-item" data-type="preparation">
        <div class="pub-main">
          <span class="pub-authors"><strong>H.-Y. Yen</strong>, et al.</span>
          <span class="pub-title">Non-Hermitian Ecology of Turbulence: Loop Spectra, Skin Effect, and the Boundary Shift of Transition</span>
          <span class="pub-venue">Manuscript under preparation, 2025</span>
        </div>
        <!--<div class="pub-actions">
          <a class="pub-link" href="NewTurbulence.pdf" target="_blank">PDF</a>
        </div> -->
      </li>
    </ol>
  </div>

</section>

<style>
  /* publications */
  .pub-filters{ display:flex; gap:10px; justify-content:center; margin: 8px 0 18px; flex-wrap: wrap; }
  .pub-filter{
    padding:6px 10px; border-radius:999px; border:1px solid rgba(0,0,0,.15); background:var(--card);
    cursor:pointer; transition: background .2s, transform .2s;
  }
  .pub-filter.is-active{ background:#000; color:#fff; }
  .pub-year{ margin: 18px 0 8px; font-size:1.2rem; text-align:center; }
  .pub-list{ list-style: decimal inside; margin:0; padding:0; display:grid; gap:14px; }
  .pub-item{
    background:var(--card); border:1px solid rgba(0,0,0,.1); border-radius:12px; padding:12px 14px;
    display:grid; gap:6px;
  }
  .pub-main{ display:grid; gap:2px; }
  .pub-title{ display:block; font-weight:600; }
  .pub-venue{ color:var(--muted); font-size:.95rem; }
  .pub-actions{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
  .pub-link, .pub-bibtex{
    text-decoration:none; color:inherit; border:1px solid rgba(0,0,0,.15); padding:4px 8px; border-radius:8px; background:transparent;
  }
  .pub-link:hover{ color:var(--primary); }
  .bibtex{
    background:#0b1020; color:#e8e8e8; padding:10px; border-radius:8px; overflow:auto; font-size:.9rem;
  }
  @media (max-width:640px){
    .pub-list{ gap:10px; }
    .pub-year{ text-align:left; padding-left:4px; }
  }
</style>

<script>
  // publications: filter + bibtex toggle
  (function(){
    const btns = Array.from(document.querySelectorAll('.pub-filter'));
    const items = Array.from(document.querySelectorAll('.pub-item'));

    btns.forEach(b=>{
      b.addEventListener('click', ()=>{
        btns.forEach(x=>{ x.classList.toggle('is-active', x===b); x.setAttribute('aria-selected', x===b?'true':'false'); });
        const f = b.dataset.filter;
        items.forEach(li=>{
          const type = li.dataset.type; // 'published' or 'preprint'
          const show = (f==='all') || (f===type);
          li.style.display = show ? '' : 'none';
        });
      });
    });

    document.querySelectorAll('.pub-bibtex').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('aria-controls');
        const pre = document.getElementById(id);
        const nowOpen = pre.hasAttribute('hidden');
        if(nowOpen){ pre.removeAttribute('hidden'); } else { pre.setAttribute('hidden',''); }
        btn.setAttribute('aria-expanded', nowOpen ? 'true' : 'false');
      });
    });
  })();
</script>

      <h2 class="page-title">Current Research Areas</h2>
      <div class="card-grid">
        <article class="research-card">
          <div class="kicker">Stochastic Dynamics</div>
          <h3 class="card-title">Tensor Networks for Classical Stochastic Systems</h3>
          <p>
            We investigate why tensor networks—originally for quantum many-body systems—can model classical 
            stochastic dynamics. By clarifying the underlying principles beyond 1D cases, we connect quantum and 
            classical formalisms through operator/spectral viewpoints.
          </p>
          <ul class="tags">
            <li class="pill">Tensor networks</li>
            <li class="pill">Rare events</li>
            <li class="pill">Stochastic processes</li>
            <li class="pill">Many-body</li>
          </ul>
        </article>

        <article class="research-card">
          <div class="kicker">Spectral Theory</div>
          <h3 class="card-title">Spectra, Phase Transitions & Universality</h3>
          <p>
            Stochastic generators expose deep links between spectra and 
            macroscopic behaviors. I study how eigenvalue distributions
            relate to universality classes in nonequilibrium systems. Currently, I found spectral topology can affect
            dynamics and phase transitions in turbulence.
          </p>
          <ul class="tags">
            <li class="pill">Generators</li>
            <li class="pill">Turbulence</li>
            <li class="pill">Spectral gap</li>
            <li class="pill">Spectral topology</li>
            <li class="pill">Phase transition and universality</li>
          </ul>
        </article>

        <article class="research-card">
          <div class="kicker">Celestial Mechanics</div>
          <h3 class="card-title">Central Configurations & Symmetry Breaking</h3>
          <p>
            Central configurations yield self-similar N-body motions (homothetic expansion/contraction or rigid rotation).
            I explore analogies to symmetry breaking in statistical physics and map phase-diagram-like structures for 
            symmetric 5-body configurations.
          </p>
          <ul class="tags">
            <li class="pill">Hamiltonian dynamical systems</li>
            <li class="pill">N-body</li>
            <li class="pill">Symmetry</li>
            <li class="pill">Bifurcation</li>
            <li class="pill">Computer Algebra</li>
          </ul>
        </article>
      </div>
    </section>
  </main>

  <!-- JS -->
  <script>
  (function(){
    // Carousel
    const carousels = document.querySelectorAll('.carousel');
    const AUTOPLAY_MS = 5000;
    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    carousels.forEach(initCarousel);

    function initCarousel(root){
      const slides = Array.from(root.querySelectorAll('.slide'));
      const dots = Array.from(root.querySelectorAll('.dot'));
      const prev = root.querySelector('[data-action="prev"]');
      const next = root.querySelector('[data-action="next"]');
      let index = Math.max(0, slides.findIndex(s => s.classList.contains('is-active')));
      let timerId = null;

      function go(to){
        index = (to + slides.length) % slides.length;
        slides.forEach((s,i)=> s.classList.toggle('is-active', i === index));
        dots.forEach((d,i)=> {
          d.classList.toggle('is-active', i === index);
          d.setAttribute('aria-selected', i === index ? 'true' : 'false');
        });
      }
      const nextSlide = () => go(index + 1);
      const prevSlide = () => go(index - 1);

      function startAutoplay(){
        if(reduceMotion) return;
        stopAutoplay();
        timerId = setInterval(nextSlide, AUTOPLAY_MS);
      }
      function stopAutoplay(){
        if(timerId) clearInterval(timerId);
        timerId = null;
      }

      next.addEventListener('click', e => { e.preventDefault(); nextSlide(); });
      prev.addEventListener('click', e => { e.preventDefault(); prevSlide(); });
      dots.forEach(d => d.addEventListener('click', () => go(parseInt(d.dataset.index || '0',10))));

      root.addEventListener('mouseenter', stopAutoplay);
      root.addEventListener('mouseleave', startAutoplay);
      root.addEventListener('keydown', e => {
        if(e.key === 'ArrowRight') nextSlide();
        else if(e.key === 'ArrowLeft') prevSlide();
      });
      root.tabIndex = 0;

      go(index);
      startAutoplay();
    }
  })();

  // Mobile nav toggle + a11y
  (function(){
    const toggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.icon-nav');
    if(!toggle || !nav) return;

    toggle.addEventListener('click', function(){
      const opened = nav.classList.toggle('open');
      toggle.setAttribute('aria-expanded', opened ? 'true' : 'false');
    });
  })();
  </script>

  <!-- 頁尾 -->
  <footer>
    <div class="wrapper">
      <div class="logos">
        <img src="NTHU-Photoroom.png" alt="NTHU Logo">
        <img src="ips_logo-Photoroom.png" alt="IPS Logo">
      </div>
    </div>
  </footer>
</body>
</html>
